<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SciCalc.Views.CalculatorPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="SciCalc">

    <Grid RowDefinitions="*,Auto,Auto,Auto" Padding="12">

        <!-- Ülemine sisestusala -->
        <Grid Grid.Row="0" Padding="8,8,8,0">
            <Label Text="{Binding InputText}"
                   Style="{StaticResource InputBoxLabelStyle}"
                   HorizontalTextAlignment="End"
                   VerticalTextAlignment="End" />
        </Grid>

        <!-- Väike riba: '=' ja tulemus -->
        <Grid Grid.Row="1" ColumnDefinitions="Auto,*" Padding="8" BackgroundColor="#202731">
            <Label Text="=" Style="{StaticResource EqualsLabelStyle}" VerticalTextAlignment="Center" />
            <Label Grid.Column="1" Text="{Binding CalculatedResult}"
                   Style="{StaticResource ResultLabelStyle}"
                   HorizontalTextAlignment="End" VerticalTextAlignment="Center"/>
        </Grid>

        <!-- TEADUSNUPUD – kaardid nagu pildil 1 -->
        <!-- TEADUSNUPUD – hallid nupud + hallid vahed -->
        <Grid Grid.Row="2"
      ColumnDefinitions="*,*,*,*,*"
      RowDefinitions="Auto,Auto,Auto,Auto"
      RowSpacing="0" ColumnSpacing="0"
      BackgroundColor="#202731">
            <!-- vahe värv -->

            <!-- Kohalik stiil: hall nupp -->
            <Grid.Resources>
                <Style x:Key="LocalSciButton"
               TargetType="Button"
               BasedOn="{StaticResource ScientificOperatorButtonStyle}">
                    <Setter Property="BackgroundColor" Value="#2c3240"/>
                    <!-- hall nupp -->
                    <Setter Property="TextColor" Value="White"/>
                    <Setter Property="CornerRadius" Value="10"/>
                    <Setter Property="Margin" Value="6"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="HeightRequest" Value="54"/>
                    <Setter Property="BorderWidth" Value="0"/>
                    <Setter Property="BorderColor" Value="Transparent"/>
                    <Setter Property="Shadow">
                        <Shadow Opacity="0.5" Offset="0,6" Radius="12" Brush="Black"/>
                    </Setter>
                </Style>
            </Grid.Resources>

            <!-- rida 1 -->
            <Button Grid.Row="0" Grid.Column="0" Text="MEAN" Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="MEAN"/>
            <Button Grid.Row="0" Grid.Column="1" Text="MOD"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="MOD"/>
            <Button Grid.Row="0" Grid.Column="2" Text="STD"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="STD"/>
            <Button Grid.Row="0" Grid.Column="3" Text="VAR"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="VAR"/>
            <Button Grid.Row="0" Grid.Column="4" Text="FACT" Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="FACT"/>

            <!-- rida 2 -->
            <Button Grid.Row="1" Grid.Column="0" Text="SIN"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="SIN"/>
            <Button Grid.Row="1" Grid.Column="1" Text="COS"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="COS"/>
            <Button Grid.Row="1" Grid.Column="2" Text="TAN"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="TAN"/>
            <Button Grid.Row="1" Grid.Column="3" Text="LOG"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="LOG"/>
            <Button Grid.Row="1" Grid.Column="4" Text="EXP"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="EXP"/>

            <!-- rida 3 -->
            <Button Grid.Row="2" Grid.Column="0" Text="ASIN"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="ASIN"/>
            <Button Grid.Row="2" Grid.Column="1" Text="ACOS"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="ACOS"/>
            <Button Grid.Row="2" Grid.Column="2" Text="ATAN"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="ATAN"/>
            <Button Grid.Row="2" Grid.Column="3" Text="LOG10" Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="LOG10"/>
            <Button Grid.Row="2" Grid.Column="4" Text="POW"   Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="POW"/>

            <!-- rida 4 -->
            <Button Grid.Row="3" Grid.Column="0" Text="SQRT" Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="SQRT"/>
            <Button Grid.Row="3" Grid.Column="1" Text="ABS"  Style="{StaticResource LocalSciButton}"
            Command="{Binding ScientificOperatorCommand}" CommandParameter="ABS"/>
            <Button Grid.Row="3" Grid.Column="2" Text=","    Style="{StaticResource LocalSciButton}"
            Command="{Binding RegionOperatorCommand}" CommandParameter=","/>
            <Button Grid.Row="3" Grid.Column="3" Text="("    Style="{StaticResource LocalSciButton}"
            Command="{Binding RegionOperatorCommand}" CommandParameter="("/>
            <Button Grid.Row="3" Grid.Column="4" Text=")"    Style="{StaticResource LocalSciButton}"
            Command="{Binding RegionOperatorCommand}" CommandParameter=")"/>
        </Grid>



        <!-- ALUMINE KLAVIATUUR -->
        <Grid Grid.Row="3" ColumnDefinitions="*,*,*,180" RowDefinitions="Auto,Auto,Auto,Auto">

            <!-- Lokaalne hall number-nupp (kirjutab üle rohelise piiri) -->
            <Grid.Resources>
                <Style x:Key="LocalNumberButton"
           TargetType="Button"
           BasedOn="{StaticResource NumberButtonStyle}">
                    <!-- sama hall, mis teadusnuppudel -->
                    <Setter Property="BackgroundColor" Value="#2c3240"/>
                    <Setter Property="TextColor" Value="White"/>

                    <!-- eemaldame rohelised ääred -->
                    <Setter Property="BorderWidth" Value="0"/>
                    <Setter Property="BorderColor" Value="Transparent"/>

                    <!-- nullime marginid, et jooned tuleksid Grid spacingust -->
                    <Setter Property="Margin" Value="0"/>

                    <!-- igaks juhuks varjud maha -->
                    <Setter Property="Shadow">
                        <Shadow Opacity="0"/>
                    </Setter>
                </Style>
            </Grid.Resources>

            <!-- Vasak 3x4 numbriplokk: tumedad vahejooned -->
            <Grid Grid.ColumnSpan="3"
      ColumnDefinitions="*,*,*"
      RowDefinitions="Auto,Auto,Auto,Auto"
      RowSpacing="1" ColumnSpacing="1"
      BackgroundColor="#202731">
                <!-- joone värv -->

                <!-- rida 1 -->
                <Button Grid.Row="0" Grid.Column="0" Text="7" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="7"/>
                <Button Grid.Row="0" Grid.Column="1" Text="8" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="8"/>
                <Button Grid.Row="0" Grid.Column="2" Text="9" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="9"/>

                <!-- rida 2 -->
                <Button Grid.Row="1" Grid.Column="0" Text="4" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="4"/>
                <Button Grid.Row="1" Grid.Column="1" Text="5" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="5"/>
                <Button Grid.Row="1" Grid.Column="2" Text="6" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="6"/>

                <!-- rida 3 -->
                <Button Grid.Row="2" Grid.Column="0" Text="1" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="1"/>
                <Button Grid.Row="2" Grid.Column="1" Text="2" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="2"/>
                <Button Grid.Row="2" Grid.Column="2" Text="3" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="3"/>

                <!-- rida 4 -->
                <Button Grid.Row="3" Grid.Column="0" Text="0" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="0"/>
                <Button Grid.Row="3" Grid.Column="1" Text="." Style="{StaticResource LocalNumberButton}"
                        Command="{Binding NumberInputCommand}" CommandParameter="."/>
                <Button Grid.Row="3" Grid.Column="2" Text="⌫" Style="{StaticResource LocalNumberButton}"
                        Command="{Binding BackspaceCommand}"/>
            </Grid>

            <!-- Parem: operaatoriplokk (kollased nupud) tumedate vahejoontega -->
            <Grid Grid.Column="3" RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="*" RowSpacing="1" BackgroundColor="#202731">
                <Button Grid.Row="0" Text="AC" Style="{StaticResource OperatorButtonStyle}" Command="{Binding ResetCommand}" />
                <Grid Grid.Row="1" ColumnDefinitions="*,*" ColumnSpacing="1" BackgroundColor="#202731">
                    <Button Grid.Column="0" Text="×" Style="{StaticResource OperatorButtonStyle}" Command="{Binding MathOperatorCommand}" CommandParameter="×"/>
                    <Button Grid.Column="1" Text="÷" Style="{StaticResource OperatorButtonStyle}" Command="{Binding MathOperatorCommand}" CommandParameter="÷"/>
                </Grid>
                <Grid Grid.Row="2" ColumnDefinitions="*,*" ColumnSpacing="1" BackgroundColor="#202731">
                    <Button Grid.Column="0" Text="+" Style="{StaticResource OperatorButtonStyle}" Command="{Binding MathOperatorCommand}" CommandParameter="+"/>
                    <Button Grid.Column="1" Text="-" Style="{StaticResource OperatorButtonStyle}" Command="{Binding MathOperatorCommand}" CommandParameter="-"/>
                </Grid>
                <Button Grid.Row="3" Text="=" Style="{StaticResource OperatorButtonStyle}" Command="{Binding CalculateCommand}" />
            </Grid>
        </Grid>

    </Grid>
</ContentPage>
